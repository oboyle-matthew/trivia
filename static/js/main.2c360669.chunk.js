(this.webpackJsonptrivia=this.webpackJsonptrivia||[]).push([[0],{250:function(e,t,n){e.exports=n(477)},255:function(e,t,n){},477:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(12),o=n.n(s),i=(n(255),n(3)),u=n(4),c=n(6),l=n(5),m=(n(188),n(36)),d=n(30),p=n(16),f=n.n(p),h=n(481),v=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).removeQuiz=function(e){var t=a.state.quizzes,n=t[e];delete t[e],a.quizzesRef.set(t),a.deletedRef=f.a.database().ref("deleted"),a.deletedRef.once("value",(function(e){var t={};e.exists()&&(t=e.val()),t[n.name]=n,a.deletedRef.set(t)}))},a.displayQuiz=function(e,t){return r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement("p",null,e.name),r.a.createElement("p",null,e.date),r.a.createElement(m.b,{to:"/host/"+e.name},"View"),"Example quiz"!==e.name&&r.a.createElement("button",{onClick:function(){return a.removeQuiz(e.name)}},"X"))},a.addNewQuiz=function(){var e=a.state,t=e.quizzes,n=e.newQuizName;t.hasOwnProperty(n)?a.setState({error:!0}):(t[n]={name:n,rounds:[]},a.quizzesRef.set(t))},a.changeNewQuizName=function(e){a.setState({newQuizName:e.target.value,error:!1})},a.displayErrorMessage=function(){return r.a.createElement("div",null,"A quiz with this name already exists")},a.state={quizzes:{},newQuizName:"",error:!1},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.quizzesRef=f.a.database().ref("quizzes"),this.quizzesRef.on("value",(function(t){e.setState({quizzes:t.val(),newQuizName:""})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.quizzes,a=t.newQuizName,s=t.error;return r.a.createElement("div",null,r.a.createElement("h1",null,"Host home page"),Object.keys(n).map((function(t,a){return e.displayQuiz(n[t],a)})),"New Quiz Name: ",r.a.createElement(h.a,{value:a,onPressEnter:this.addNewQuiz,onChange:this.changeNewQuizName,style:{width:300}}),r.a.createElement("button",{onClick:this.addNewQuiz},"Add"),s&&this.displayErrorMessage())}}]),n}(r.a.Component),b=n(482),w=n(90),E=n.n(w),g=n(116),y=(g.a.Option,r.a.Component,g.a.Option,r.a.Component,n(484)),O=n(479),S=n(480),C=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).updateQuestionString=function(e){a.setState({questionString:e.target.value})},a.state={questionString:""},a}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",null,"Question:"),r.a.createElement(h.a,{onChange:this.updateQuestionString}))}}]),n}(r.a.Component),j=g.a.Option,q=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={questionType:"text"},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.questionType;return r.a.createElement("div",null,r.a.createElement("div",null,"Question Type:"),r.a.createElement(g.a,{value:e,style:{width:200,height:40},onChange:this.props.update},r.a.createElement(j,{value:"text"},"Text"),r.a.createElement(j,{value:"number"},"Number"),r.a.createElement(j,{value:"closest"},"Closest Number"),r.a.createElement(j,{value:"multiple_choice"},"Multiple Choice"),r.a.createElement(j,{value:"multiple_answers"},"Multiple Answers"),r.a.createElement(j,{value:"speed"},"Speed round")))}}]),n}(r.a.Component),R=n(33),A=n(483),k=g.a.Option,z=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).changeNewAnswer=function(e){a.setState({newAnswer:e.target.value})},a.changeAnswerType=function(e){a.setState({answerType:e})},a.addPossibleAnswer=function(e){var t=a.state.possibleAnswers;a.setState({possibleAnswers:[].concat(Object(R.a)(t),[e.target.value.toLowerCase()]),newAnswer:""})},a.removePossibleAnswer=function(e){var t=a.state.possibleAnswers;t.splice(e,1),a.setState({possibleAnswers:t})},a.getInfoForPosting=function(){var e=a.state,t=e.answerType,n=e.possibleAnswers,r=e.newAnswer;return r.length>0&&-1===n.indexOf(r)&&(n.push(r.toLowerCase()),a.setState({possibleAnswers:n,newAnswer:""})),{answerType:t,possibleAnswers:n}},a.state={answerType:"exactly",possibleAnswers:[],newAnswer:""},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.newAnswer,a=t.answerType,s=t.possibleAnswers;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,"Answer Type: "),r.a.createElement(g.a,{value:a,style:{width:200,height:40},onChange:this.changeAnswerType},r.a.createElement(k,{value:"exactly"},"Is Exactly..."),r.a.createElement(k,{value:"contains"},"Contains...")),r.a.createElement("br",null)),r.a.createElement("h4",null,"Possible answers: "),r.a.createElement("div",null,0===s.length?"No answer options yet...":r.a.createElement(A.b,{grid:{column:5},dataSource:s,renderItem:function(t,n){return r.a.createElement(A.b.Item,null,t,r.a.createElement("button",{onClick:function(){return e.removePossibleAnswer(n)}},"X"))}}),r.a.createElement("div",null,"Input an answer (Enter to add it to the list):",r.a.createElement(h.a,{style:{width:400},onPressEnter:this.addPossibleAnswer,value:n,onChange:this.changeNewAnswer,placeholder:"Answer"}))))}}]),n}(r.a.Component),T=(g.a.Option,function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).getInfoForPosting=function(){return a.state},a.changeAnswer=function(e){var t=e.target.value;"-"!==t&&""!==t&&isNaN(t)&&t.indexOf("e")!==t.length-1||a.setState({numberAnswer:t})},a.changeMargin=function(e){var t=e.target.value;"-"!==t&&""!==t&&isNaN(t)&&t.indexOf("e")!==t.length-1||a.setState({margin:t})},a.state={numberAnswer:null,margin:0},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.numberAnswer,n=e.margin;return r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},"Answer: ",r.a.createElement(h.a,{style:{width:200},value:t,onChange:this.changeAnswer}),"+- ",r.a.createElement(h.a,{style:{width:200},value:n,onChange:this.changeMargin}),"(Answers accepted between: ",parseFloat(t)-parseFloat(n)," and ",parseFloat(t)+parseFloat(n),")")}}]),n}(r.a.Component)),N=(g.a.Option,function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).getInfoForPosting=function(){return a.state},a.changeAnswer=function(e){var t=e.target.value;"-"!==t&&""!==t&&isNaN(t)&&t.indexOf("e")!==t.length-1||a.setState({numberAnswer:t})},a.updateScore=function(e,t){var n=a.state.positionScoring,r=e.target.value;""!==r&&isNaN(r)||(n[t]=r,a.setState(n))},a.addPosition=function(){var e=a.state.positionScoring;a.setState({positionScoring:[].concat(Object(R.a)(e),[0])})},a.removePosition=function(e){var t=a.state.positionScoring;t.splice(e,1),a.setState({positionScoring:t})},a.renderPositionScores=function(){var e=a.state.positionScoring;return r.a.createElement("div",null,e.map((function(e,t){return r.a.createElement("div",null,"Position ",t+1,":",r.a.createElement(h.a,{style:{width:50},value:e,onChange:function(e){return a.updateScore(e,t)}}),r.a.createElement("button",{onClick:function(){return a.removePosition(t)}},"X"))})),r.a.createElement("button",{onClick:a.addPosition},"Add position"))},a.state={numberAnswer:null,positionScoring:[3,2,1,0,0]},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state.numberAnswer;return r.a.createElement("div",null,"Answer: ",r.a.createElement(h.a,{style:{width:200,height:30},value:e,onChange:this.changeAnswer}),this.renderPositionScores())}}]),n}(r.a.Component)),x=n(146),P=(g.a.Option,function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).getInfoForPosting=function(){var e=a.state;return{choices:e.choices,correctChoice:e.correctChoice}},a.changeNewOption=function(e){a.setState({newOption:e.target.value})},a.addChoice=function(){var e=a.state,t=e.choices,n=e.newOption;a.setState({choices:[].concat(Object(R.a)(t),[n]),newOption:""})},a.removeOption=function(e){var t=a.state.choices;t.splice(e,1),a.setState({choices:t})},a.onChange=function(e){a.setState({correctChoice:e.target.value})},a.state={choices:[],newOption:"",correctChoice:null},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.choices,a=t.newOption,s=t.correctChoice;return r.a.createElement("div",null,r.a.createElement(x.default.Group,{onChange:this.onChange,value:s},n.map((function(t,n){return r.a.createElement("div",null,r.a.createElement(x.default,{value:t},t),r.a.createElement("button",{onClick:function(){return e.removeOption(n)}},"X"))}))),r.a.createElement("div",null,r.a.createElement(h.a,{onPressEnter:this.addChoice,style:{width:200},value:a,onChange:this.changeNewOption}),r.a.createElement("button",{onClick:this.addChoice},"Add")))}}]),n}(r.a.Component)),I=g.a.Option,M=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).getInfoForPosting=function(){var e=a.state,t=e.clues,n=e.scoreType,r=e.cluesRevealedScore,s=e.positionScores,o=a.textAnswerRef.current.getInfoForPosting();return o.clues=t.map((function(e){return{clue:e}})),o.scoreType=n,o.positionScoring="clues_revealed"===n?r:s,o},a.updateClue=function(e,t){var n=a.state.clues;n[t]=e.target.value,a.setState({clues:n})},a.removeClue=function(e){var t=a.state,n=t.clues,r=t.cluesRevealedScore;n.splice(e,1),r.splice(0,1),a.setState({clues:n,cluesRevealedScore:r})},a.addClue=function(){var e=a.state,t=e.clues,n=e.cluesRevealedScore;a.setState({clues:[].concat(Object(R.a)(t),[""]),cluesRevealedScore:[parseFloat(n[0])+1].concat(Object(R.a)(n))})},a.renderClues=function(){var e=a.state.clues;return r.a.createElement("div",null,e.map((function(e,t){return r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},"Clue ",t+1,": ",r.a.createElement(h.a,{style:{width:800},value:e,onChange:function(e){return a.updateClue(e,t)}}),t>0&&r.a.createElement("button",{onClick:function(){return a.removeClue(t)}},"X"))})),r.a.createElement("button",{onClick:a.addClue},"Add Clue"))},a.changeScoreType=function(e){a.setState({scoreType:e})},a.updatePositionScore=function(e,t){var n=a.state.positionScores,r=e.target.value;""!==r&&isNaN(r)||(n[t]=r,a.setState({positionScores:n}))},a.removePositionScore=function(e){var t=a.state.positionScores;t.splice(e,1),a.setState({positionScores:t})},a.addPositionScore=function(){var e=a.state.positionScores;a.setState({positionScores:[].concat(Object(R.a)(e),[0])})},a.renderPositionScores=function(){var e=a.state.positionScores;return r.a.createElement("div",null,e.map((function(e,t){return r.a.createElement("div",null,"Position ",t+1,":",r.a.createElement(h.a,{style:{width:50},value:e,onChange:function(e){return a.updatePositionScore(e,t)}}),r.a.createElement("button",{onClick:function(){return a.removePositionScore(t)}},"X"))})),r.a.createElement("button",{onClick:a.addPositionScore},"Add position"))},a.renderScoring=function(){var e=a.state.scoreType;return r.a.createElement("div",null,r.a.createElement("div",null,"Scores determined by:"),r.a.createElement(g.a,{value:e,style:{width:200,height:40},onChange:a.changeScoreType},r.a.createElement(I,{value:"clues_revealed"},"Clues Revealed"),r.a.createElement(I,{value:"position"},"Position")),"clues_revealed"===e?a.renderCluesRevealedScores():a.renderPositionScores())},a.updateCluesRevealedScore=function(e,t){var n=a.state.cluesRevealedScore,r=e.target.value;""!==r&&isNaN(r)||(n[t]=r,a.setState({cluesRevealedScore:n}))},a.renderCluesRevealedScores=function(){var e=a.state.cluesRevealedScore;return r.a.createElement("div",null,e.map((function(e,t){return r.a.createElement("div",null,"Guessing after clue ",t+1," =",r.a.createElement(h.a,{style:{width:50},value:e,onChange:function(e){return a.updateCluesRevealedScore(e,t)}}),"points")})))},a.state={clues:[""],scoreType:"clues_revealed",cluesRevealedScore:[1],positionScores:[3,2,1,0,0,0]},a.textAnswerRef=r.a.createRef(),a}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,this.renderClues(),r.a.createElement(z,{ref:this.textAnswerRef}),this.renderScoring())}}]),n}(r.a.Component),Q=(g.a.Option,function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).getInfoForPosting=function(){return{multipleScores:a.state.scores,multipleAnswers:a.scoresRefs.map((function(e){return e.current.getInfoForPosting()}))}},a.addAnswer=function(){var e=a.state.scores;a.setState({scores:[].concat(Object(R.a)(e),[parseFloat(e[e.length-1])+1])}),a.scoresRefs.push(r.a.createRef())},a.removeLastAnswer=function(){var e=a.state.scores;e.pop(),a.setState({scores:e}),a.scoresRefs.pop()},a.updateScore=function(e,t){var n=a.state.scores,r=e.target.value;""!==r&&isNaN(r)||(n[t]=r,a.setState({scores:n}))},a.state={scores:[1]},a.scoresRefs=[r.a.createRef()],a}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.state.scores;return r.a.createElement("div",null,t.map((function(t,n){return r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement("h3",null,"Answer ",n+1,":"),r.a.createElement(z,{ref:e.scoresRefs[n]}))})),r.a.createElement("hr",null),r.a.createElement("button",{onClick:this.addAnswer},"Add another answer"),t.length>1&&r.a.createElement("button",{onClick:this.removeLastAnswer},"Remove last answer"),t.map((function(t,n){return r.a.createElement("div",null,n+1," correct = ",r.a.createElement(h.a,{style:{width:50},value:t,onChange:function(t){return e.updateScore(t,n)}})," points")})))}}]),n}(r.a.Component)),F=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).updateScore=function(e){var t=e.target.value;""!==t&&isNaN(t)||a.setState({score:t})},a.state={score:1},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state.score;return r.a.createElement("div",null,"Correct answer: ",r.a.createElement(h.a,{style:{width:50},placeHolder:"score...",value:e,onChange:this.updateScore})," points")}}]),n}(r.a.Component),_=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).updateQuestionType=function(e){a.setState({questionType:e})},a.displayPossibleAnswers=function(){var e=a.state.questionType;return"text"===e?r.a.createElement(z,{ref:a.possibleAnswersRef}):"number"===e?r.a.createElement(T,{ref:a.possibleAnswersRef}):"closest"===e?r.a.createElement(N,{ref:a.possibleAnswersRef}):"multiple_choice"===e?r.a.createElement(P,{ref:a.possibleAnswersRef}):"speed"===e?r.a.createElement(M,{ref:a.possibleAnswersRef}):"multiple_answers"===e?r.a.createElement(Q,{ref:a.possibleAnswersRef}):void 0},a.getInfoForPosting=function(){var e=a.state.questionType,t={question:a.questionRef.current.state.questionString,questionType:e},n=a.possibleAnswersRef.current.getInfoForPosting();return Object.keys(n).forEach((function(e){return t[e]=n[e]})),a.scoreRef.current&&(t.score=a.scoreRef.current.state.score),console.log(t),t},a.displayScores=function(){var e=a.state.questionType;if("text"===e||"number"===e||"multiple_choice"===e)return r.a.createElement(F,{ref:a.scoreRef})},a.state={questionType:"text",modalOpen:!1},a.questionRef=r.a.createRef(),a.questionTypeRef=r.a.createRef(),a.possibleAnswersRef=r.a.createRef(),a.scoreRef=r.a.createRef(),a}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state.questionType;return r.a.createElement("div",null,r.a.createElement(C,{ref:this.questionRef}),r.a.createElement(q,{ref:this.questionTypeRef,questionType:e,update:this.updateQuestionType}),this.displayPossibleAnswers(),this.displayScores())}}]),n}(r.a.Component);function D(e,t,n){!function(e){var t=e.question,n=e.possibleAnswers,a=e.numberAnswer,r=e.score,s=e.positionScoring,o=e.clues;if(""===t)throw"Must have a question string";if(n&&0===n.length)throw"Must have at least one correct answer";if(e.hasOwnProperty("numberAnswer")&&U(a))throw"Must be a valid number";if(e.hasOwnProperty("score")&&U(r))throw"Must have a score for the question";if(e.hasOwnProperty("positionScoring")&&L(s))throw"Must have at least one team scoring";if(e.hasOwnProperty("clues")&&function(e){return 0===e.filter((function(e){return""!==e})).length}(o))throw"Must have at least one clue for speed round";if(e.hasOwnProperty("choices")){var i=e.choices,u=e.correctChoice;if(i.length<=1)throw"Must have at least 2 options";if(null===u)throw"Must select a correct option for multiple choice"}if(e.hasOwnProperty("multipleAnswers")){var c=e.multipleAnswers,l=e.multipleScores;if(function(e){for(var t=0;t<e.length;t++)if(0===e[t].possibleAnswers.length)return!0;return!1}(c))throw"All options for answers must have a possible answer";if(L(l))throw"Must be possible to score points"}}(e);var a=t.questions;t.questions=a?[].concat(Object(R.a)(t.questions),[e]):[e],console.log(t),n.set(t)}function U(e){return""===e||null===e||isNaN(e)}function L(e){return 0===e.filter((function(e){return!(""===e||isNaN(e)||null===e||0===parseFloat(e))})).length}var B=function(e){var t=e%10,n=e%100;return 1==t&&11!=n?e+"st":2==t&&12!=n?e+"nd":3==t&&13!=n?e+"rd":e+"th"},X=function(e,t){var n=t.questionType;return"text"===n||"speed"===n?r.a.createElement("div",null,t.answerType.toUpperCase()," [",t.possibleAnswers.join(", "),"]"):"number"===n||"closest"===n?r.a.createElement("div",null,t.numberAnswer,t.margin&&" +- "+t.margin):"multiple_answers"===n?r.a.createElement("div",null,t.multipleAnswers.map((function(e,t){return r.a.createElement("div",null,t+1,": ",e.answerType.toUpperCase()," [",e.possibleAnswers.join(", "),"]")}))):"multiple_choice"===n?r.a.createElement("div",null,t.correctChoice.toUpperCase()," from [",t.choices.join(", "),"]"):e},H=function(e,t){var n=t.questionType;if("text"===n||"number"===n||"multiple_choice"===n)return r.a.createElement("div",null,t.score," point(s)");if("closest"===n)return t.positionScoring.map((function(e,t){return r.a.createElement("div",null,B(t+1)," closest: ",e," point(s)")}));if("multiple_answers"===n)return t.multipleScores.map((function(e,t){return r.a.createElement("div",null,t+1," Correct: ",e," point(s)")}));if("speed"===n){if("clues_revealed"===t.scoreType)return t.positionScoring.map((function(e,t){return r.a.createElement("div",null,t+1," clue(s) revealed: ",e," point(s)")}));if("position"===t.scoreType)return t.positionScoring.map((function(e,t){return r.a.createElement("div",null,B(t+1),": ",e," point(s)")}))}return e},G=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).beginSpeedRound=function(e,t){var n=a.props.roundRef.child("questions").child(t);e.begin=!0,n.set(e)},a.endSpeedRound=function(e,t){var n=a.props.roundRef.child("questions").child(t);e.begin=!1,e.clues.forEach((function(e){return e.show=!1})),n.set(e)},a.showClue=function(e,t,n){var r=a.props.roundRef.child("questions").child(t).child("clues").child(n);e.show=!0,r.set(e)},a.hideClue=function(e,t,n){var r=a.props.roundRef.child("questions").child(t).child("clues").child(n);e.show=!1,r.set(e)},a.renderSpeedClues=function(e,t){return e.clues.map((function(n,s){var o;return o=n.show?r.a.createElement("button",{onClick:function(){return a.hideClue(n,t,s)}},"Hide"):r.a.createElement("button",{onClick:function(){return a.showClue(n,t,s)}},"Show"),r.a.createElement("div",null,"Clue ",s+1,": ",n.clue,e.begin&&o)}))},a.renderClues=function(e,t,n){var s=t.questionType;return"multiple_choice"===s?t.choices.map((function(e){return r.a.createElement("div",null,e)})):"speed"===s?a.renderSpeedClues(t,n):e},a.renderQuestions=function(e,t,n){return"speed"===t.questionType?r.a.createElement("div",null,e,t.begin?r.a.createElement("button",{onClick:function(){return a.endSpeedRound(t,n)}},"End"):r.a.createElement("button",{onClick:function(){return a.beginSpeedRound(t,n)}},"Begin")):e},a.addQuestion=function(){a.setState({modalOpen:!0})},a.handleOk=function(e){var t=a.props.round,n=a.props.roundRef;try{D(a.questionCreatorRef.current.getInfoForPosting(),t,n),a.setState({modalOpen:!1})}catch(r){console.log(r)}},a.handleCancel=function(){a.setState({modalOpen:!1})},a.toggleShowRound=function(e,t){var n=a.props.roundRef;t.show=e,t.questions.forEach((function(e,t){"speed"===e.questionType&&(e.begin=!1,e.clues.forEach((function(e){return e.show=!1})))})),n.set(t)},a.state={modalOpen:!1},a.questionCreatorRef=r.a.createRef(),a.columns=[{title:"Question",dataIndex:"question",key:"question",render:a.renderQuestions},{title:"Question Type",dataIndex:"questionType",key:"question_type"},{title:"Clues/Options",dataIndex:"clues",key:"clues",render:a.renderClues},{title:"Answers",dataIndex:"answers",key:"answers",render:X},{title:"Scoring",dataIndex:"scoring",key:"scoring",render:H}],a}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.props.round,n=this.state.modalOpen;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,"Show round: ",r.a.createElement(y.a,{checked:t.show,onChange:function(n){return e.toggleShowRound(n,t)}})),t.questions&&r.a.createElement(O.a,{columns:this.columns,dataSource:t.questions,pagination:!1}),r.a.createElement("button",{onClick:this.addQuestion},"Add question"),r.a.createElement(S.a,{title:"Create a question",visible:n,onOk:this.handleOk,onCancel:this.handleCancel},r.a.createElement(_,{ref:this.questionCreatorRef}))))}}]),n}(r.a.Component),K=b.a.Panel,V=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).addNewRound=function(){var e=a.state.quiz,t=e.rounds;if(t){var n=Object.keys(t).length+1;e.rounds["Round "+n]={name:"Round "+n}}else e.rounds={"Round 1":{name:"Round 1"}};a.quizRef.set(e)},a.renderTeams=function(){var e=a.state.quiz.teams;return e&&r.a.createElement("div",null,r.a.createElement("h3",null,"Teams registered:"),Object.keys(e).map((function(e){return r.a.createElement("div",null,e)})))},a.state={quiz:{}},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.name,t=this;this.quizRef=f.a.database().ref("quizzes").child(e),this.quizRef.on("value",(function(e){t.setState({quiz:e.val()})}))}},{key:"render",value:function(){var e=this,t=this.state.quiz,n=t.rounds;return r.a.createElement("div",null,r.a.createElement("h1",null,"Quiz name here: ",t&&t.name),this.renderTeams(),r.a.createElement(b.a,null,n&&Object.keys(n).map((function(t,a){var s=n[t];return r.a.createElement(K,{header:t,key:a},r.a.createElement(G,{round:s,roundRef:e.quizRef.child("rounds").child(t)}))}))),r.a.createElement("button",{onClick:this.addNewRound},"Add New Round"))}}]),n}(r.a.Component),W=Object(d.f)(V),J=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).displayQuiz=function(e,t){return r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement("p",null,e.name),r.a.createElement("p",null,e.date),r.a.createElement(m.b,{to:"/participant/"+e.name},"View"))},a.state={quizzes:{}},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.quizzesRef=f.a.database().ref("quizzes"),this.quizzesRef.on("value",(function(t){e.setState({quizzes:t.val()})}))}},{key:"render",value:function(){var e=this,t=this.state.quizzes;return r.a.createElement("div",null,r.a.createElement("h1",null,"Participant home page"),Object.keys(t).map((function(n,a){return e.displayQuiz(t[n],a)})))}}]),n}(r.a.Component),$=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={quiz:{}},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.name,t=this;this.quizRef=f.a.database().ref("quizzes").child(e),this.quizRef.on("value",(function(e){t.setState({quiz:e.val()})}))}},{key:"render",value:function(){var e=this.state.quiz,t=e.rounds;return r.a.createElement("div",null,r.a.createElement("h1",null,"Quiz name here: ",e&&e.name),r.a.createElement(b.a,{defaultActiveKey:"0"},t&&Object.keys(t).map((function(n,a){var s=t[n];return r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement("p",null,n),s.show&&r.a.createElement(m.b,{to:"/participant/"+e.name+"/"+s.name},"View"))}))))}}]),n}(r.a.Component),Y=Object(d.f)($),Z=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).updateAnswer=function(e){a.setState({answer:e.target.value})},a.state={answer:""},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state.answer;return r.a.createElement(h.a,{value:e,onChange:this.updateAnswer})}}]),n}(r.a.Component),ee=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).updateAnswer=function(e){var t=e.target.value;"-"!==t&&""!==t&&isNaN(t)&&t.indexOf("e")!==t.length-1||a.setState({answer:t})},a.state={answer:""},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state.answer;return r.a.createElement(h.a,{value:e,onChange:this.updateAnswer})}}]),n}(r.a.Component),te=(g.a.Option,function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).onChange=function(e){a.setState({answer:e.target.value})},a.state={answer:null},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.choices,t=this.state.answer;return r.a.createElement("div",null,r.a.createElement(x.default.Group,{onChange:this.onChange,value:t},e.map((function(e,t){return r.a.createElement("div",null,r.a.createElement(x.default,{value:e},e))}))))}}]),n}(r.a.Component)),ne=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).updateAnswer=function(e){a.setState({answer:e.target.value})},a.state={answer:""},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.props.clues,n=this.state.answer;return r.a.createElement("div",null,t.map((function(e){return e.show&&r.a.createElement("div",null,e.clue)})),r.a.createElement(h.a,{value:n,onChange:this.updateAnswer}),r.a.createElement("button",{onClick:function(){return e.props.submit(n)}},"Submit"))}}]),n}(r.a.Component);function ae(e,t,n,a,r){console.log(e),n.questions.forEach((function(t,n){if(e[n]){console.log(e[n]);var s=a.child("questions").child(n),o=function(e,t,n,a){if(""===t||void 0===t||null===t)return 0;t=t.toLowerCase();var r=e.questionType;if("text"===r)return re(e,t)?parseFloat(e.score):0;if("number"===r)return function(e,t){var n;try{n=parseFloat(e.margin)}catch(r){n=0}var a=parseFloat(e.numberAnswer);return parseFloat(t)>=a-n&&parseFloat(t)<=a+n}(e,t)?parseFloat(e.score):0;if("closest"===r)return function(e,t,n,a){var r=e.guesses,s=e.numberAnswer,o=e.positionScoring;void 0===r&&(r=[]);var i=-1;r.forEach((function(e,t){e.teamName===a&&(i=t)})),i>=0&&r.splice(i,1);return r.push({num:parseFloat(t),teamName:a}),r.sort((function(e,t){return function(e,t,n){return Math.abs(parseFloat(e)-parseFloat(n))-Math.abs(parseFloat(t)-parseFloat(n))}(e.num,t.num,s)})),e.guesses=r,e.scores=function(e,t){var n={};return e.forEach((function(a,r){var s=a.num,o=a.teamName;r>0&&parseFloat(e[r-1].num)===parseFloat(s)?n[o]=n[e[r-1].teamName]:-1===Object.keys(n).indexOf(o)&&(r<t.length?n[o]=parseFloat(t[r]):n[o]=0)})),n}(r,o),n.set(e),e.scores[a]}(e,t,n,a);if("multiple_choice"===r)return function(e,t){return e.correctChoice===t}(e,t)?parseFloat(e.score):0;if("multiple_answers"===r){var s=0;return e.multipleAnswers.forEach((function(e,n){s+=re(e,t[n])?1:0})),s>0?e.multipleScores[s-1]:0}if("speed"===r)return function(e,t,n,a){var r=e.guesses,s=e.scoreType,o=e.clues,i=e.positionScoring;void 0===r&&(r=[]);var u=0;o.forEach((function(e){e.show&&u++}));var c=re(e,t);if(r.push({guess:t,teamName:a,cluesRevealed:u,correct:c}),e.guesses=r,n.set(e),!c)return 0;if("clues_revealed"===s)return 0===u?i[0]:i[u-1];if("position"===s){var l=r.filter((function(t){return re(e,t.guess)}));return l.length>i.length?0:i[l.length-1]}}(e,t,n,a)}(t,e[n].answer,s,r);void 0===t.userAnswer&&(t.userAnswer={}),t.userAnswer[r]=e[n].answer,"closest"!==t.questionType&&function(e,t,n,a){var r=e.scores;void 0===r&&(r={});r[a]=n,e.scores=r,t.set(e)}(t,s,o,r),console.log("Question "+(n+1)+": "+o+" points")}}))}function re(e,t){for(var n=e.answerType,a=e.possibleAnswers,r=0;r<a.length;r++){var s=a[r].toLowerCase();if("exactly"===n&&s===t)return!0;if("contains"===n&&t.includes(s))return!0}return!1}var se=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).updateAnswer=function(e,t){var n=a.state.answer;n[t]=e.target.value,a.setState({answer:n})},a.state={answer:e.multipleAnswers.map((function(){return""}))},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.props.multipleAnswers;this.state.answer;return t?t.map((function(t,n){return r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},"Answer ",n+1,": ",r.a.createElement(h.a,{value:t[n],onChange:function(t){return e.updateAnswer(t,n)}}))})):r.a.createElement("div",null)}}]),n}(r.a.Component),oe=g.a.Option,ie=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).userInput=function(e,t){var n=e.questionType,s=a.state.userInputRefs;return"text"===n?r.a.createElement(Z,{ref:s[t]}):"number"===n||"closest"===n?r.a.createElement(ee,{ref:s[t]}):"multiple_choice"===n?r.a.createElement(te,{choices:e.choices,ref:s[t]}):"speed"===n?r.a.createElement(ne,{clues:e.clues,ref:s[t],submit:function(e){return a.submitSpeedQuestion(e,t)}}):"multiple_answers"===n?r.a.createElement(se,{multipleAnswers:e.multipleAnswers,ref:s[t]}):void 0},a.displayQuestion=function(e,t){if("speed"!==e.questionType||e.begin)return r.a.createElement("div",{style:{border:"2px solid black"}},r.a.createElement("h4",null,"Q",t+1,": ",e.question," (type=",e.questionType,")"),a.userInput(e,t))},a.submitSpeedQuestion=function(e,t){a.props.match.params.name;var n=a.state,r=n.round,s=n.selectedTeam;if(null!==s){var o=r.questions.map((function(){return null}));o[t]={answer:e},ae(o,0,r,a.roundRef,s)}},a.submitRound=function(){a.props.match.params.name;var e=a.state,t=e.round,n=e.userInputRefs,r=e.selectedTeam;if(null!==r){var s=[];n.forEach((function(e){e.current?s.push(e.current.state):s.push(null)})),ae(s,0,t,a.roundRef,r)}},a.changeSelectedTeam=function(e){a.setState({selectedTeam:e})},a.selectTeam=function(){var e=a.state,t=e.selectedTeam,n=e.teams;return r.a.createElement(g.a,{value:t,style:{width:200,height:40},onChange:a.changeSelectedTeam},Object.keys(n).map((function(e){return r.a.createElement(oe,{value:e},e)})))},a.state={round:{},userInputRefs:[],selectedTeam:null,teams:[]},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params,t=e.name,n=e.round,a=this;this.roundRef=f.a.database().ref("quizzes").child(t).child("rounds").child(n),this.roundRef.on("value",(function(e){var t=e.val();a.setState({round:t,userInputRefs:t.questions.map((function(){return r.a.createRef()}))})})),this.teamRef=f.a.database().ref("quizzes").child(t).child("teams"),this.teamRef.on("value",(function(e){var t=e.val();a.setState({teams:t})}))}},{key:"render",value:function(){var e=this,t=this.state.round;return this.userInputRefs=[],r.a.createElement("div",null,"Select your team: ",this.selectTeam(),r.a.createElement("h1",null,"Round name here: ",t&&t.name),t&&t.questions&&t.questions.map((function(t,n){return e.displayQuestion(t,n)})),r.a.createElement("button",{onClick:this.submitRound},"Submit all answers for this round"))}}]),n}(r.a.Component),ue=Object(d.f)(ie),ce=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).updateTeamName=function(e){a.setState({teamName:e.target.value})},a.updateNewTeamMember=function(e){a.setState({newTeamMember:e.target.value})},a.addTeamMember=function(){var e=a.state,t=e.teamMembers,n=e.newTeamMember;a.setState({teamMembers:[].concat(Object(R.a)(t),[n]),newTeamMember:""})},a.submitTeam=function(){var e=a.state,t=e.quiz,n=e.teamName,r=e.teamMembers;t.teams||(t.teams={}),t.teams[n]={name:n,teamMembers:r},a.quizRef.set(t),a.setState({teamMembers:[],teamName:""})},a.state={quiz:{},teamName:"",teamMembers:[],newTeamMember:""},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.name,t=this;this.quizRef=f.a.database().ref("quizzes").child(e),this.quizRef.on("value",(function(e){t.setState({quiz:e.val()})}))}},{key:"render",value:function(){var e=this.state,t=e.quiz,n=e.teamName,a=e.teamMembers,s=e.newTeamMember;return r.a.createElement("div",null,r.a.createElement("h1",null,"Quiz name here: ",t&&t.name),"Team name: ",r.a.createElement(h.a,{value:n,onChange:this.updateTeamName}),a.map((function(e){return r.a.createElement("div",null,e)})),"Add Team Member: ",r.a.createElement(h.a,{onPressEnter:this.addTeamMember,value:s,onChange:this.updateNewTeamMember}),r.a.createElement("button",{onClick:this.submitTeam},"Submit Team"))}}]),n}(r.a.Component),le=Object(d.f)(ce),me=(g.a.Option,{title:"Team Name",dataIndex:"teamName",key:"teamName"}),de={title:"Total",dataIndex:"total",key:"total"},pe=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).createTotalTeamScores=function(e){e.forEach((function(e){var t=0;Object.keys(e).filter((function(e){return"teamName"!==e&&"total"!==e})).forEach((function(n){t+=parseFloat(e[n])})),e.total=t}))},a.state={quiz:{}},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.name;console.log(e);var t=this;this.quizRef=f.a.database().ref("quizzes").child(e),this.quizRef.on("value",(function(e){var n=e.val();t.setState({quiz:n})}))}},{key:"render",value:function(){var e,t=this.state.quiz,n=t.teams,a=t.rounds;n&&(e=Object.keys(n).map((function(e){return{teamName:e}})));var s=[];a&&(s=Object.keys(a),Object.keys(a).forEach((function(t){var n=a[t];n.questions&&n.questions.forEach((function(t){t.scores&&Object.keys(t.scores).forEach((function(a){var r,s=e.filter((function(e){return e.teamName===a}))[0];r=isNaN(t.scores[a])||""===t.scores[a]?0:parseFloat(t.scores[a]),s.hasOwnProperty(n.name)?s[n.name]+=r:s[n.name]=r}))}))})));var o=s.map((function(e){return{title:e,dataIndex:e,key:e}}));e&&(this.createTotalTeamScores(e),e.sort((function(e,t){return t.total-e.total})));var i=[me].concat(Object(R.a)(o),[de]);return r.a.createElement("div",null,r.a.createElement(O.a,{columns:i,dataSource:e}))}}]),n}(r.a.Component),fe=Object(d.f)(pe),he=(g.a.Option,function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).renderOtherInfo=function(e,t){if("speed"===e.questionType){if(e.guesses){var n=e.guesses.filter((function(e){return e.teamName===t}));if(n.length>0){var a=n[0];if(a.cluesRevealed)return(a.correct?"CORRECT after ":"INCORRECT after ")+a.cluesRevealed+" clue(s) revealed"}}return"Testing"}},a.renderScores=function(e,t){var n=a.props.columns,s=e.scores,o=s&&Object.keys(s).map((function(n,r){var o=a.renderOtherInfo(e,n);return{teamName:n,teamAnswer:e.userAnswer&&e.userAnswer[n],points:s[n],questionType:e.questionType,questionIndex:t,other:o}}));return r.a.createElement(O.a,{columns:n,dataSource:o})},a.displayQuestion=function(e,t){return r.a.createElement("div",{style:{border:"2px solid black"}},r.a.createElement("h4",null,"Q",t+1,": ",e.question," (type=",e.questionType,")"),function(e){var t=e.questionType;return"text"===t||"speed"===t?r.a.createElement("div",null,e.answerType.toUpperCase()," [",e.possibleAnswers.join(", "),"]"):"number"===t||"closest"===t?r.a.createElement("div",null,e.numberAnswer,e.margin&&" +- "+e.margin):"multiple_answers"===t?r.a.createElement("div",null,e.multipleAnswers.map((function(e,t){return r.a.createElement("div",null,t+1,": ",e.answerType.toUpperCase()," [",e.possibleAnswers.join(", "),"]")}))):"multiple_choice"===t?r.a.createElement("div",null,e.correctChoice.toUpperCase()," from [",e.choices.join(", "),"]"):e.possibleAnswers}(e),a.renderScores(e,t))},a.state={round:{}},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params,t=e.name,n=e.round,a=this;this.roundRef=f.a.database().ref("quizzes").child(t).child("rounds").child(n),this.roundRef.on("value",(function(e){var t=e.val();a.setState({round:t})}))}},{key:"render",value:function(){var e=this,t=this.state.round;return r.a.createElement("div",null,r.a.createElement("h1",null,"Round name here: ",t&&t.name),t&&t.questions&&t.questions.map((function(t,n){return e.displayQuestion(t,n)})),r.a.createElement(fe,null))}}]),n}(r.a.Component)),ve=Object(d.f)(he),be=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).changePoints=function(t,n){var a=e.props.match.params,r=a.name,s=a.round;console.log(r),e.scoreRef=f.a.database().ref("quizzes").child(r).child("rounds").child(s).child("questions").child(n.questionIndex).child("scores").child(n.teamName),console.log(t.target.value);var o=t.target.value;e.scoreRef.set(o)},e.getColumns=function(){return[{title:"Team Name",dataIndex:"teamName",key:"teamName"},{title:"Team Answer",dataIndex:"teamAnswer",key:"teamAnswer"},{title:"Other",dataIndex:"other",key:"other"},{title:"Points",dataIndex:"points",key:"points"},{title:"Update points",dataIndex:"updatePoints",key:"updatePoints",render:function(t,n){return r.a.createElement(h.a,{style:{width:150},value:n.points,onChange:function(t){return e.changePoints(t,n)}})}}]},e}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement(ve,{columns:this.getColumns()})}}]),n}(r.a.Component),we=Object(d.f)(be),Ee=[{title:"Team Name",dataIndex:"teamName",key:"teamName"},{title:"Points",dataIndex:"points",key:"points"}],ge=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement(ve,{columns:Ee})}}]),n}(r.a.Component),ye=Object(d.f)(ge),Oe=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement(d.a,{exact:!0,path:"/participant"},r.a.createElement(J,null)),r.a.createElement(d.a,{exact:!0,path:"/"},r.a.createElement(J,null)),r.a.createElement(d.a,{exact:!0,path:"/host"},r.a.createElement(v,{firebase:!0})),r.a.createElement(d.a,{exact:!0,path:"/host/:name"},r.a.createElement(W,null)),r.a.createElement(d.a,{exact:!0,path:"/participant/:name"},r.a.createElement(Y,null)),r.a.createElement(d.a,{exact:!0,path:"/participant/:name/:round"},r.a.createElement(ue,null)),r.a.createElement(d.a,{exact:!0,path:"/participant/:name/:round/results"},r.a.createElement(ye,null)),r.a.createElement(d.a,{exact:!0,path:"/host/:name/:round/results"},r.a.createElement(we,null)),r.a.createElement(d.a,{exact:!0,path:"/participant/:name/:round/results/:teamName"}),r.a.createElement(d.a,{exact:!0,path:"/register/:name"},r.a.createElement(le,null)))}}]),n}(r.a.Component);E.a.initializeApp({apiKey:"AIzaSyBfCWC3nO4Dm6t_Mdi023zABHHKzrOdQkI",authDomain:"trivia-7b47d.firebaseapp.com",databaseURL:"https://trivia-7b47d.firebaseio.com",projectId:"trivia-7b47d",storageBucket:"trivia-7b47d.appspot.com",messagingSenderId:"1017757056711"});var Se=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(Oe,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Se,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[250,1,2]]]);
//# sourceMappingURL=main.2c360669.chunk.js.map